<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Project setup</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
width: 0.8em;
margin: 0 0.8em 0.2em -1em;  vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>




<style type="text/css">body {background-color: #fff;margin: 1em auto;max-width: 700px;overflow: visible;padding-left: 2em;padding-right: 2em;font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;font-size: 14px;line-height: 1.35;}table {margin: 1em auto;border-width: 1px;border-color: #DDDDDD;border-style: outset;border-collapse: collapse;}table th {border-width: 2px;padding: 5px;border-style: inset;}table td {border-width: 1px;border-style: inset;line-height: 18px;padding: 5px 5px;}table, table th, table td {border-left-style: none;border-right-style: none;}table thead, table tr.even {background-color: #f7f7f7;}p {margin: 0.5em 0;}blockquote {background-color: #f6f6f6;padding: 0.25em 0.75em;}hr {border-style: solid;border: none;border-top: 1px solid #777;margin: 28px 0;}dl {margin-left: 0;}dl dd {margin-bottom: 13px;margin-left: 13px;}dl dt {font-weight: bold;}ul {margin-top: 0;}ul li {list-style: circle outside;}ul ul {margin-bottom: 0;}pre, code {background-color: #f7f7f7;border-radius: 3px;color: #333;white-space: pre-wrap; }pre {border-radius: 3px;margin: 5px 0px 10px 0px;padding: 10px;}pre:not([class]) {background-color: #f7f7f7;}code {font-family: Consolas, Monaco, 'Courier New', monospace;font-size: 85%;}p > code, li > code {padding: 2px 0px;}div.figure {text-align: center;}img {background-color: #FFFFFF;padding: 2px;border: 1px solid #DDDDDD;border-radius: 3px;border: 1px solid #CCCCCC;margin: 0 5px;}h1 {margin-top: 0;font-size: 35px;line-height: 40px;}h2 {border-bottom: 4px solid #f7f7f7;padding-top: 10px;padding-bottom: 2px;font-size: 145%;}h3 {border-bottom: 2px solid #f7f7f7;padding-top: 10px;font-size: 120%;}h4 {border-bottom: 1px solid #f7f7f7;margin-left: 8px;font-size: 105%;}h5, h6 {border-bottom: 1px solid #ccc;font-size: 105%;}a {color: #0033dd;text-decoration: none;}a:hover {color: #6666ff; }a:visited {color: #800080; }a:visited:hover {color: #BB00BB; }a[href^="http:"] {text-decoration: underline; }a[href^="https:"] {text-decoration: underline; }</style>
</head>

<body>


<header id="title-block-header">
<h1 class="title">Project setup</h1>

</header>


<h1 data-number="1" id="create-a-research-project-folder-from-scratch"><span class="header-section-number">1</span> Create a research project folder from scratch</h1>
<ul>
<li>The following is intended for creating and maintaining a consistent and well-organized folder structure, based on some international “standards”.</li>
<li>If you have already set up a project structure or data collection, jump to <a href="#sec-tailor-project-settings" class="quarto-xref">Section 2</a>.</li>
</ul>
<h2 data-number="1.1" id="whatever-you-chose"><span class="header-section-number">1.1</span> Whatever you chose…</h2>
<div>
<blockquote>
<p><strong>Warning</strong></p>
<p>Irrespective of the path A or B taken below, you want to distinguish between</p>
<ul>
<li><p>the folder where report generations are placed (never store your own work here as it may be overwritten by Saros)</p></li>
<li><p>the folder for each chapter where one writes, edits and store versions for proofing, etc. Saros will never touch these folders.</p></li>
<li><p>the folder where complete chapters are placed for publication on a website. Quarto Website Project will read from this and generate a website, reports as PDFs, DOCXs, etc.</p></li>
</ul>
</blockquote>
</div>
<h2 data-number="1.2" id="path-a-copy-entire-folder-structure"><span class="header-section-number">1.2</span> Path A: Copy entire folder structure</h2>
<p>Copy from an existing project using Saros, and edit the 00*_ R-files and _quarto.yaml files for project-specific settings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>saros.base<span class="sc">::</span><span class="fu">copy_folder_contents_to_dir</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  from, </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="fu">getwd</span>(),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">only_copy_folders =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<h2 data-number="1.3" id="path-b-add-only-saros-to-an-existing-project-folder"><span class="header-section-number">1.3</span> Path B: Add only Saros to an existing project folder</h2>
<p>Very often you have an existing project going, and only want to add the Saros-specific report production setup.</p>
<p>An easy basis to get going is the project template used by the <a href="https://www.nifu.no">Nordic Institute for the Studies of Innovation, Research, and Education (NIFU)</a>. Remember to have your project folder synchronized if this already exists.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(saros.base)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>saros.base<span class="sc">::</span><span class="fu">download_zip_to_folder</span>(<span class="at">out_path =</span> fs<span class="sc">::</span><span class="fu">path</span>(<span class="fu">getwd</span>(), <span class="st">&quot;Saros&quot;</span>)) <span class="co"># Set to your project folder&#39;s Saros-folder (keep absolute folder path as short as possible)</span></span></code></pre></div>
</div>
<h2 data-number="1.4" id="path-c-generate-a-complete-folder-structure-from-a-folder-structure-file"><span class="header-section-number">1.4</span> Path C: Generate a complete folder structure from a folder structure file</h2>
<p>This will create empty folders and thus force projects to follow a certain template. The template can be modified to an organization’s liking.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify these to your liking</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>project_path <span class="ot">&lt;-</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  fs<span class="sc">::</span><span class="fu">path</span>(<span class="fu">getwd</span>())</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>project_initials <span class="ot">&lt;-</span> <span class="st">&quot;SMILE&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>saros_folder_name <span class="ot">&lt;-</span> <span class="st">&quot;Saros&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>project_structure_yaml_path <span class="ot">&lt;-</span> <span class="st">&quot;project_folder_structure.yaml&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Se function help for more details</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>saros.base<span class="sc">::</span><span class="fu">initialize_saros_project</span>(</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> project_path, </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">structure_path =</span> project_structure_yaml_path, </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">replacement_list =</span> <span class="fu">c</span>(<span class="st">&quot;prosjekt_initialer&quot;</span> <span class="ot">=</span> project_initials),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">numbering_prefix =</span> <span class="st">&quot;global_max&quot;</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">numbering_inheritance =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">word_separator =</span> <span class="cn">NULL</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">numbering_name_separator =</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">numbering_parent_child_separator =</span> <span class="cn">NULL</span>,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">&quot;asis&quot;</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">count_existing_folders =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">r_files_out_path =</span> fs<span class="sc">::</span><span class="fu">path</span>(project_path, <span class="fu">paste0</span>(saros_folder_name, project_initials), <span class="st">&quot;01_script&quot;</span>, <span class="st">&quot;script_templates&quot;</span>), </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">create =</span> <span class="cn">FALSE</span>) <span class="co"># SET create = TRUE when you are satisfied with the folder structure</span></span></code></pre></div>
</div>
<h1 data-number="2" id="sec-tailor-project-settings"><span class="header-section-number">2</span> Tailor project settings</h1>
<ul>
<li>Saros expands upon the inheritance idea in Quarto and allows setting and exempting settings inheritance-wise: organization level, project level, report cycle, chapter and chunk. This means that one can set defaults which can be overridden per project or per report.</li>
<li>For instance, <a href="https://www.nifu.no">NIFU</a> sets its organization-level settings that apply to all projects in one global R-file, which contains figure colour palette rules, special functions, and so forth.
<ul>
<li>This is currently limited to R-files used for generating reports and for rendering reports. The yaml metadata is currently duplicated per project, and will be in the future centralized in one location.</li>
</ul></li>
<li>File lanes in particular must be standardized across data collection cycles. Avoid that each implementation has its own folder in the project’s main folder - experience shows that it is very difficult to keep consistent folder structures across years when you are rarely confronted with how things have been done in the past. Try as much as possible to have the year folder at the bottom of the hierarchy - even if this means that you have to copy a number of subfolders every year.</li>
</ul>
<h2 data-number="2.1" id="most-important-changes"><span class="header-section-number">2.1</span> Most important changes</h2>
<p>This is a quick approach to changing the most important settings. See further below for a more detailed explanation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>quarto_yaml <span class="ot">&lt;-</span> yaml<span class="sc">::</span><span class="fu">read_yaml</span>(<span class="fu">file.path</span>(<span class="st">&quot;02_resources&quot;</span>, <span class="st">&quot;YAML&quot;</span>, <span class="st">&quot;_quarto.yaml&quot;</span>))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>quarto_yaml<span class="sc">$</span>website<span class="sc">$</span>title <span class="ot">&lt;-</span> <span class="st">&quot;PROJECT TITLE&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>quarto_yaml<span class="sc">$</span>website<span class="sc">$</span><span class="st">`</span><span class="at">site-url</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="st">&quot;WEBSITE URL&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>quarto_yaml<span class="sc">$</span>project_no <span class="ot">&lt;-</span> <span class="st">&quot;INTERNAL PROJECT NUMBER&quot;</span> <span class="co"># Usually not needed</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>quarto_yaml<span class="sc">$</span>funder <span class="ot">&lt;-</span> <span class="st">&quot;FUNDER&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>quarto_yaml<span class="sc">$</span>funder_address <span class="ot">&lt;-</span> <span class="st">&quot;FUNDER&#39;S ADDRESS&quot;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>yaml<span class="sc">::</span><span class="fu">write_yaml</span>(quarto_yaml, <span class="at">file =</span> <span class="fu">file.path</span>(<span class="st">&quot;02_resources&quot;</span>, <span class="st">&quot;YAML&quot;</span>, <span class="st">&quot;_quarto.yaml&quot;</span>))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>report_yaml <span class="ot">&lt;-</span> yaml<span class="sc">::</span><span class="fu">read_yaml</span>(<span class="fu">file.path</span>(<span class="st">&quot;02_resources&quot;</span>, <span class="st">&quot;YAML&quot;</span>, <span class="st">&quot;_report_header.yaml&quot;</span>))</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>report_yaml<span class="sc">$</span>signer_1 <span class="ot">&lt;-</span> <span class="st">&quot;REPORT SIGNER 1&quot;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>report_yaml<span class="sc">$</span>signer_1_title <span class="ot">&lt;-</span> <span class="st">&quot;REPORT SIGNER 1 JOB TITLE&quot;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>report_yaml<span class="sc">$</span>signer_1 <span class="ot">&lt;-</span> <span class="st">&quot;REPORT SIGNER 2&quot;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>report_yaml<span class="sc">$</span>signer_1_title <span class="ot">&lt;-</span> <span class="st">&quot;REPORT SIGNER 2 JOB TITLE&quot;</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>report_yaml<span class="sc">$</span>report_type <span class="ot">&lt;-</span> <span class="st">&quot;rapport&quot;</span> <span class="co"># Usually not needed</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>yaml<span class="sc">::</span><span class="fu">write_yaml</span>(report_yaml, <span class="at">file =</span> <span class="fu">file.path</span>(<span class="st">&quot;02_resources&quot;</span>, <span class="st">&quot;YAML&quot;</span>, <span class="st">&quot;_report_header.yaml&quot;</span>))</span></code></pre></div>
</div>





</body></html>